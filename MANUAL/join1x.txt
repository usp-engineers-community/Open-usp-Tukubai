Tukubaiオンラインコマンドマニュアル

join1x(USP)

【名前】

join1x : キーの値が同じレコードが複数存在するファイル同士を連結。

【書式】

Usage   : join1x [+ng[<fd>]] key=<n> <master> [<tran>]
Version : Fri Jul 22 01:09:14 JST 2022

【説明】

テキストファイル <tran> の "key=<n>" で指定したキーフィールドがマス
ターファイル <master> の第１フィールド（キーフィールド）とマッチした
行のみを <tran> から抽出して、<master> の情報を連結して出力します。
連結は <tran> のキーフィールドの直後に <master> の内容のうち
キーフィールド以外を挿入する形で行われます。

複数のキーフィールドがある場合、<master> のキーフィールドは、<tran> の
キーフィールドと同じ並びで、最小フィールドが１となるようスライドさせた
キーフィールドとなります。
例えば、key=3/5 のときは、並び＝３フィールド連続したキー、なので、
<master> は１から３連続したフィールド、つまり、第１から第３フィールドが
キーとなります。

masterまたはtranに-を指定すると標準入力を使用する。
tranが無指定の場合には標準入力を使用する。

<master> の第１フィールドおよび <tran> のキーフィールドについては必
ず昇順でソートされていることが条件になります。

+ngオプションをつけると、一致した行を標準出力ファイルへ、一致しなかった行を
ファイルディスクリプタ<fd>のファイルへ出力する。<fd>を省略した場合は標準エラー出力
ファイルへ出力する。

join1 との違いは、マスターファイルのキーフィールドの値が同一のレコー
ドが複数存在できる点です。マスターとトランザクションファイルのキーフ
ィールド値が同一のレコード同士を総掛けで連結して出力します。

【例１】

（マスター：master）
$ cat master
1 東京1
1 東京2
2 大阪1
2 大阪2

（トランザクション：tran）
$ cat tran
1 新宿
1 上野
2 梅田
2 難波
2 京橋
3 金山
3 栄
3 熱田
4 博多
4 天神

$ join1x key=1 master tran > data
$ cat data
1 東京1 新宿
1 東京2 新宿
1 東京1 上野
1 東京2 上野
2 大阪1 梅田
2 大阪2 梅田
2 大阪1 難波
2 大阪2 難波
2 大阪1 京橋
2 大阪2 京橋

last modified: Thu Aug 11 10:32:40 JST 2022
Contact us: uecinfo@usp-lab.com
Copyright (c) 2012-2022 Universal Shell Programming Laboratory All Rights
